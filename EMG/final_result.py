import pickle
import os
import matplotlib.pyplot as plt

file_name="C:\\Users\\shitosu\\Desktop\\Training_results_model____.pkl"
val_acc2=[46.14, 49.81, 53.43, 57.22, 58.13, 61.41, 62.18, 61.37, 63.77, 64.85, 65.0, 66.01, 65.72, 66.72, 68.67, 70.06, 68.36, 70.13, 70.81, 69.09, 70.28, 72.58, 70.26, 71.17, 73.4, 71.85, 73.0, 73.07, 73.78, 74.16, 74.42, 74.5, 74.4, 74.25, 74.63, 74.93, 74.82, 74.96, 74.96, 74.95, 78.23543, 77.93296, 77.68263999999999, 78.23543, 77.08812999999999, 78.19371, 78.28757999999999, 78.18327999999998, 78.11027, 77.78693999999999, 80.93596559999999, 81.16441388999999, 81.14265691, 81.62131046999998, 81.55603952999999, 81.56691801999999, 81.76273083999997, 81.62131046999998, 80.69663882, 81.75185235, 81.36022671, 81.73009536999999, 81.79536630999999, 81.588675, 81.54516103999998, 80.20710677, 81.64306744999999, 81.36022671, 81.59955348999999, 81.52340405999999]
rounded_list = [round(x, 2) for x in val_acc2]

recall=[0.4541783630847931, 0.4870735704898834, 0.5458216667175293, 0.5929055213928223, 0.5769795775413513, 0.6717489957809448, 0.6050653457641602, 0.6515083312988281, 0.6802669763565063, 0.7288763523101807, 0.6929397583007812, 0.6447798013687134, 0.6930314898490906, 0.6924315690994263, 0.673384428024292, 0.7154294848442078, 0.7121849060058594, 0.721860408782959, 0.7407381534576416, 0.704458475112915, 0.7547924518585205, 0.7433409690856934, 0.6939416527748108, 0.7068715691566467, 0.7514200210571289, 0.7260648012161255, 0.7455217838287354, 0.7266021966934204, 0.7777013778686523, 0.7684640288352966, 0.7726827263832092, 0.7939542531967163, 0.7927355766296387, 0.7970901727676392, 0.8006938695907593, 0.7920528650283813, 0.7450146079063416, 0.7777077555656433, 0.7791444063186646, 0.7732366323471069, 0.7854214906692505, 0.7541635036468506, 0.7461421489715576, 0.7802988290786743, 0.7831317186355591, 0.7737900018692017, 0.7860643863677979, 0.7408199906349182, 0.7625032067298889, 0.7515208721160889, 0.8032679557800293, 0.770736813545227, 0.7739647626876831, 0.7587740421295166, 0.7693461775779724, 0.7684937715530396, 0.7576330900192261, 0.7799019813537598, 0.7164566516876221, 0.7655526399612427, 0.7837580442428589, 0.7291592359542847, 0.7276291847229004, 0.7752525806427002, 0.7592246532440186, 0.7778725624084473, 0.7475787401199341, 0.7341630458831787, 0.7642751336097717, 0.7613488435745239]
f1_score=[0.43030017614364624, 0.47001320123672485, 0.5149439573287964, 0.5617863535881042, 0.5540310144424438, 0.6639208793640137, 0.5933781862258911, 0.6169018745422363, 0.6675592660903931, 0.6814792156219482, 0.6736881136894226, 0.6227078437805176, 0.6426602005958557, 0.6797877550125122, 0.6709617376327515, 0.7042680382728577, 0.6883760690689087, 0.7232133746147156, 0.7160732746124268, 0.6823886036872864, 0.7143533825874329, 0.7081578969955444, 0.6809178590774536, 0.6702953577041626, 0.7401810884475708, 0.7042131423950195, 0.724614679813385, 0.7118796110153198, 0.7656069397926331, 0.757026195526123, 0.7529789209365845, 0.7557928562164307, 0.7799115180969238, 0.7557857036590576, 0.7787394523620605, 0.7538803815841675, 0.7345753312110901, 0.7436798810958862, 0.7422144412994385, 0.7688615322113037, 0.756148099899292, 0.7262811660766602, 0.7061643600463867, 0.7433331608772278, 0.7440418004989624, 0.737981379032135, 0.746985912322998, 0.7242336273193359, 0.7395663857460022, 0.7122331261634827, 0.7580940127372742, 0.7383942604064941, 0.7386273145675659, 0.7178345322608948, 0.7424144744873047, 0.7342338562011719, 0.726099967956543, 0.7434666156768799, 0.7086173892021179, 0.7339789867401123, 0.733357310295105, 0.715600848197937, 0.7196300029754639, 0.7349709272384644, 0.7149754166603088, 0.7490096092224121, 0.7134650945663452, 0.7272800207138062, 0.7251973152160645, 0.7142097353935242]
def calculate_precision(recall, f1_score):
    precision = [2 * f1 * r / (f1 + r) for r, f1 in zip(recall, f1_score)]
    return precision
if os.path.exists(file_name):
    print("Exists")
    with open(file_name,'rb') as f:
        metrics=pickle.load(f)
        print([i for i in metrics.keys()])
        # print(list(map(float,list(metrics["Precision"].values()))))
        # print(metrics["Precision"].values())
        R=list(map(float,list(metrics["Recall"].values())))
        F1=list(map(float,list(metrics["F1Score"].values())))
        precision = calculate_precision(R,F1)
        precision_dict = {index: value for index, value in enumerate(precision)}
        val_acc_dict={index: value for index, value in enumerate(rounded_list)}
        metrics["Precision"]=precision_dict
        metrics["val_acc"]=val_acc_dict
    with open('data.pkl', 'wb') as file:
        pickle.dump(metrics, file)
    with open('data.pkl','rb') as f:
        cs=pickle.load(f)
        print(cs)
        # for i in cs:
        #     print(i.value)

